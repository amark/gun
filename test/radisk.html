<h1>Radisk</h1>

<script src="../examples/jquery.js"></script>
<script src="../gun.js"></script>
<script src="../lib/radix.js"></script>
<script src="../lib/radisk.js"></script>
<script src="../lib/store.js"></script>

<button onclick="var i = 0; window.TO = setInterval(function(){ gun.get(Gun.text.random(3)).put({a: ++i}) }, 0);">start</button>
<button onclick="clearTimeout(window.TO);">end</button>
<br/><br/>
<button onclick="gun.get('a').put({b: Gun.text.random(900)});setTimeout(function(){gun.get('x').put({y: Gun.text.random(900)});},1000);">write</button>
<button id='read' onclick="console.debug.i=1;gun.get('a').once(d => console.log(1, d));gun.get('x').once(d => console.log(2, d));">read</button>

<script>
<<<<<<< HEAD
localStorage.clear();
var storage = Object(null)
=======
//localStorage.clear();

>>>>>>> 7a8fceba071bcac55cbfb707d768cf603b764f18
function Store(opt){
  opt = opt || {};
  opt.file = String(opt.file || 'radata');
<<<<<<< HEAD
  var store = function Store(){};
  store.put = function(file, data, cb){
    console.log(`called put with ${file} and ${data}`);
    storage[file] = data
    cb(undefined, 1)
  };
  store.get = function(file, cb){
    console.log(`called get with ${file}`);
    var temp = storage[file] || undefined
    cb(undefined, temp)
  };
  store.list = function(cb, match){
    var arr = Object.keys(storage);
    console.log(arr)
    Gun.obj.map(arr, cb) || cb();
=======
  var storage = window.storage = localStorage;//{};
  var store = function Store(){}, u;
  store.put = function(file, data, cb){
    //console.log("put", file, data);
    setTimeout(function(){
      storage[file] = data;
      cb(null, 1);
    }, 25);
  };
  store.get = function(file, cb){
    //console.log("get", file);
    setTimeout(function(){
      var tmp = storage[file] || u;
      cb(null, tmp);
    }, 10);
  };
  store.list = function(cb, match){
    //console.log('list');
    setTimeout(function(){
      Gun.obj.map(Object.keys(storage), cb) || cb();
    }, 5);
>>>>>>> 7a8fceba071bcac55cbfb707d768cf603b764f18
  };
  return store;
}

<<<<<<< HEAD
var gun = Gun({localStorage: false, store:Store()});
</script>
=======
var gun = Gun({localStorage: false, store: Store(), chunk: 1024, batch: 100});

//setTimeout(function(){ $('#read').trigger('click') });
</script>
>>>>>>> 7a8fceba071bcac55cbfb707d768cf603b764f18
