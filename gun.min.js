!function(){var t;"undefined"!=typeof window&&(t=window),"undefined"!=typeof global&&(t=global);var T=(t=t||{}).console||{log:function(){}};function A(o,t){return t?require(o):o.slice?A[e(o)]:function(t,n){o(t={exports:{}}),A[e(n)]=t.exports};function e(t){return t.split("/").slice(-1).toString().replace(".js","")}}if("undefined"!=typeof module)var J=module;A(function(t){var n,c,l={};function o(t,n){v(this,n)&&void 0!==this[n]||(this[n]=t)}function e(t,n){var o=this.n;if(!o||!(n===o||g(o)&&v(o,n)))return!!n||void 0}function p(t,n){2!==arguments.length?(p.r=p.r||[]).push(t):(p.r=p.r||{})[t]=n}l.fn={is:function(t){return!!t&&"function"==typeof t}},l.bi={is:function(t){return t instanceof Boolean||"boolean"==typeof t}},l.num={is:function(t){return!d(t)&&(0<=t-parseFloat(t)+1||1/0===t||-1/0===t)}},l.text={is:function(t){return"string"==typeof t}},l.text.ify=function(t){return l.text.is(t)?t:"undefined"!=typeof JSON?JSON.stringify(t):t&&t.toString?t.toString():t},l.text.random=function(t,n){var o="";for(t=t||24,n=n||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";0<t;)o+=n.charAt(Math.floor(Math.random()*n.length)),t--;return o},l.text.match=function(t,n){var o,e;return"string"==typeof t&&("string"==typeof n&&(n={"=":n}),t===(o=(n=n||{})["="]||n["*"]||n[">"]||n["<"])||e===n["="]&&(o=n["*"]||n[">"]||n["<"],t.slice(0,(o||"").length)===o||e===n["*"]&&(e!==n[">"]&&e!==n["<"]?t>=n[">"]&&t<=n["<"]:e!==n[">"]&&t>=n[">"]||e!==n["<"]&&t<=n["<"])))},l.list={is:function(t){return t instanceof Array}},l.list.slit=Array.prototype.slice,l.list.sort=function(o){return function(t,n){return t&&n?(t=t[o])<(n=n[o])?-1:n<t?1:0:0}},l.list.map=function(t,n,o){return r(t,n,o)},l.list.index=1,l.obj={is:function(t){return!!t&&(t instanceof Object&&t.constructor===Object||"Object"===Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1])}},l.obj.put=function(t,n,o){return(t||{})[n]=o,t},l.obj.has=function(t,n){return t&&Object.prototype.hasOwnProperty.call(t,n)},l.obj.del=function(t,n){if(t)return t[n]=null,delete t[n],t},l.obj.as=function(t,n,o,e){return t[n]=t[n]||(e===o?{}:o)},l.obj.ify=function(n){if(g(n))return n;try{n=JSON.parse(n)}catch(t){n={}}return n},l.obj.to=function(t,n){return r(t,o,n=n||{}),n},l.obj.copy=function(t){return t?JSON.parse(JSON.stringify(t)):t},l.obj.empty=function(t,n){return!t||!r(t,e,{n:n})},c=Object.keys,Object.keys=Object.keys||function(t){return n(t,function(t,n,o){o(n)})},l.obj.map=n=function(t,n,o){var e,i,r,a,u=0,s=h(n);if(p.r=null,c&&g(t)&&(r=c(t),a=!0),d(t)||r)for(e=(r||t).length;u<e;u++){var f=u+l.list.index;if(s){if(void 0!==(i=a?n.call(o||this,t[r[u]],r[u],p):n.call(o||this,t[u],f,p)))return i}else if(n===t[a?r[u]:u])return r?r[u]:f}else for(u in t)if(s){if(v(t,u)&&void 0!==(i=o?n.call(o,t[u],u,p):n(t[u],u,p)))return i}else if(n===t[u])return u;return s?p.r:l.list.index?0:-1},l.time={},l.time.is=function(t){return t?t instanceof Date:+(new Date).getTime()};var h=l.fn.is,d=l.list.is,i=l.obj,g=i.is,v=i.has,r=i.map;t.exports=l})(A,"./type"),A(function(t){t.exports=function t(n,o,e){if(!n)return{to:t};n=(this.tag||(this.tag={}))[n]||(this.tag[n]={tag:n,to:t._={next:function(t){var n;(n=this.to)&&n.next(t)}}});if(o instanceof Function){var i={off:t.off||(t.off=function(){if(this.next===t._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=t._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:t._,next:o,the:n,on:this,as:e};return(i.back=n.last||n).to=i,n.last=i}return(n=n.to)&&void 0!==o&&n.next(o),n}})(A,"./onto"),A(function(t){if("undefined"==typeof JSON)throw new Error("JSON is not included in this browser. Please load it first: ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js");var r=JSON.stringify;t.exports=function(t,n,o,e,i){if(t<n)return{defer:!0};if(n<o)return{historical:!0};if(o<n)return{converge:!0,incoming:!0};if(n===o){if((e=r(e)||"")===(i=r(i)||""))return{state:!0};if(e<i)return{converge:!0,current:!0};if(i<e)return{converge:!0,incoming:!0}}return{err:"Invalid CRDT Data: "+e+" to "+i+" at "+n+" to "+o+"!"}}})(A,"./HAM"),A(function(t){var n=A("./type"),o={};function e(t,n){return this.id?this.id=!1:n==i&&u(t)?void(this.id=t):this.id=!1}o.is=function(t){return void 0!==t&&(null===t||t!==1/0&&(!!(u(t)||r(t)||a(t))||(o.link.is(t)||!1)))},o.link=o.rel={_:"#"},o.link.is=function(t){if(t&&t[i]&&!t._&&f(t)){var n={};if(l(t,e,n),n.id)return n.id}return!1},o.link.ify=function(t){return c({},i,t)},n.obj.has._=".";var i=o.link._,r=n.bi.is,a=n.num.is,u=n.text.is,s=n.obj,f=s.is,c=s.put,l=s.map;t.exports=o})(A,"./val"),A(function(t){var n=A("./type"),i=A("./val"),r={_:"_"};function a(t,n){if(n!==r._)return!i.is(t)||void(this.cb&&this.cb.call(this.as,t,n,this.n,this.s))}function e(t,n){var o,e=this.o;e.map?void 0===(o=e.map.call(this.as,t,""+n,e.node))?s(e.node,n):e.node&&(e.node[n]=o):i.is(t)&&(e.node[n]=t)}r.soul=function(t,n){return t&&t._&&t._[n||l]},r.soul.ify=function(t,n){return n="string"==typeof n?{soul:n}:n||{},(t=t||{})._=t._||{},t._[l]=n.soul||t._[l]||c(),t},r.soul._=i.link._,r.is=function(t,n,o){var e;return!!u(t)&&!!(e=r.soul(t))&&!f(t,a,{as:o,cb:n,s:e,n:t})},r.ify=function(t,n,o){return n?"string"==typeof n?n={soul:n}:n instanceof Function&&(n={map:n}):n={},n.map&&(n.node=n.map.call(o,t,void 0,n.node||{})),(n.node=r.soul.ify(n.node||{},n))&&f(t,e,{o:n,as:o}),n.node};var o=n.obj,u=o.is,s=o.del,f=o.map,c=n.text.random,l=r.soul._;t.exports=r})(A,"./node"),A(function(t){var n=A("./type"),a=A("./node");function u(){var t;return t=o(),e=e<t?(i=0,t+u.drift):t+(i+=1)/r+u.drift}var o=n.time.is,e=-1/0,i=0,r=1e3,s="undefined"!=typeof performance&&(performance.timing&&performance);s&&s.timing&&s.timing.navigationStart||(s=!1);function f(t,n){k!==n&&u.ify(this.o,n,this.s)}u._=">",u.drift=0,u.is=function(t,n,o){var e=n&&t&&t[k]&&t[k][u._]||o;if(e)return v(e=e[n])?e:-1/0},u.lex=function(){return u().toString(36).replace(".","")},u.ify=function(t,n,o,e,i){if(!t||!t[k]){if(!i)return;t=a.soul.ify(t,i)}var r=l(t[k],u._);return void 0!==n&&n!==k&&(v(o)&&(r[n]=o),void 0!==e&&(t[n]=e)),t},u.to=function(t,n,o){var e=(t||{})[n];return h(e)&&(e=g(e)),u.ify(o,n,u.is(t,n),e,a.soul(t))},u.map=function(i,r,a){var t=h(t=i||r)?t:null;return i=m(i=i||r)?i:null,t&&!i?(r=v(r)?r:u(),t[k]=t[k]||{},d(t,f,{o:t,s:r}),t):(a=a||h(r)?r:void 0,r=v(r)?r:u(),function(t,n,o,e){if(!i)return f.call({o:o,s:r},t,n),t;i.call(a||this||{},t,n,o,e),p(o,n)&&void 0===o[n]||f.call({o:o,s:r},t,n)})};var c=n.obj,l=c.as,p=c.has,h=c.is,d=c.map,g=c.copy,v=n.num.is,m=n.fn.is,k=a._;t.exports=u})(A,"./state"),A(function(t){var a=A("./type"),u=A("./val"),s=A("./node"),i={};function r(t,n){if(!t||n!==s.soul(t)||!s.is(t,this.fn,this.as))return!0;this.cb&&(o.n=t,o.as=this.as,this.cb.call(o.as,t,n,o))}function o(t){t&&s.is(o.n,t,o.as)}function f(t,n){var o;return(o=function(t,n){var o,e=t.seen,i=e.length;for(;i--;)if(o=e[i],n.obj===o.obj)return o;e.push(n)}(t,n))?o:(n.env=t,n.soul=c,s.ify(n.obj,e,n)&&(n.link=n.link||u.link.ify(s.soul(n.node)),n.obj!==t.shell&&(t.graph[u.link.is(n.link)]=n.node)),n)}function e(t,n,o){var e,i,r=this,a=r.env;if(s._===n&&g(t,u.link._))return o._;if(e=l(t,n,o,r,a)){if(n||(r.node=r.node||o||{},g(t,s._)&&s.soul(t)&&(r.node._=b(t._)),r.node=s.soul.ify(r.node,u.link.is(r.link)),r.link=r.link||u.link.ify(s.soul(r.node))),(i=a.map)&&(i.call(a.as||{},t,n,o,r),g(o,n))){if(void 0===(t=o[n]))return void d(o,n);if(!(e=l(t,n,o,r,a)))return}if(!n)return r.node;if(!0===e)return t;if((i=f(a,{obj:t,path:r.path.concat(n)})).node)return i.link}}function c(t){var n=this,o=u.link.is(n.link),e=n.env.graph;n.link=n.link||u.link.ify(t),n.link[u.link._]=t,n.node&&n.node[s._]&&(n.node[s._][u.link._]=t),g(e,o)&&(e[t]=e[o],d(e,o))}function l(t,n,o,e,i){var r;return!!u.is(t)||(h(t)?1:(r=i.invalid)?l(t=r.call(i.as||{},t,n,o),n,o,e,i):(i.err="Invalid value at '"+e.path.concat(n).join(".")+"'!",void(a.list.is(t)&&(i.err+=" Use `.set(item)` instead of an Array."))))}function p(t,n){var o,e;if(s._!==n)(o=u.link.is(t))?(e=this.opt.seen[o])?this.obj[n]=e:this.obj[n]=this.opt.seen[o]=i.to(this.graph,o,this.opt):this.obj[n]=t;else{if(v(t,u.link._))return;this.obj[n]=b(t)}}i.is=function(t,n,o,e){return!(!t||!h(t)||v(t)||k(t,r,{cb:n,fn:o,as:e}))},i.ify=function(t,n,o){var e={path:[],obj:t};return n?"string"==typeof n?n={soul:n}:n instanceof Function&&(n.map=n):n={},n.soul&&(e.link=u.link.ify(n.soul)),n.shell=(o||{}).shell,n.graph=n.graph||{},n.seen=n.seen||[],n.as=n.as||o,f(n,e),n.root=e.node,n.graph},i.node=function(t){var n=s.soul(t);if(n)return m({},n,t)},i.to=function(t,n,o){if(t){var e={};return o=o||{seen:{}},k(t[n],p,{obj:e,graph:t,opt:o}),e}};a.fn.is;var n=a.obj,h=n.is,d=n.del,g=n.has,v=n.empty,m=n.put,k=n.map,b=n.copy;t.exports=i})(A,"./graph"),A(function(t){A("./onto"),t.exports=function(t,n){if(this.on){if(!(t instanceof Function)){if(!t||!n)return;var o=t["#"]||t,e=(this.tag||empty)[o];if(!e)return;return e=this.on(o,n),clearTimeout(e.err),!0}o=n&&n["#"]||Math.random().toString(36).slice(2);if(!t)return o;var i=this.on(o,t,n);return i.err=i.err||setTimeout(function(){i.next({err:"Error: No ACK received yet.",lack:!0}),i.off()},(this.opt||{}).lack||9e3),o}}})(A,"./ask"),A(function(t){var r=A("./type");var a=r.time.is;t.exports=function(e){var i={s:{}};return e=e||{max:1e3,age:9e3},i.check=function(t){var n;return!!(n=i.s[t])&&(n.pass?n.pass=!1:i.track(t))},i.track=function(t,n){var o=i.s[t]||(i.s[t]={});return o.was=a(),n&&(o.pass=!0),i.to||(i.to=setTimeout(function(){var o=a();r.obj.map(i.s,function(t,n){t&&e.age>o-t.was||r.obj.del(i.s,n)}),i.to=null},e.age+9)),o},i}})(A,"./dup"),A(function(t){var n=A("./type"),o=A("./HAM"),e=A("./val"),i=A("./node"),r=A("./state"),a=A("./graph"),u=A("./onto"),s=A("./ask"),f=A("./dup");function c(t){return t instanceof c?(this._={gun:this,$:this}).$:this instanceof c?c.create(this._={gun:this,$:this,opt:t}):new c(t)}function l(t){var n,o,e=this.as,i=e.at||e,r=i.$;(o=t["#"])||(o=t["#"]=y(9)),(n=i.dup).check(o)?e.out===t.out&&(t.out=void 0,this.to.next(t)):(n.track(o),i.ask(t["@"],t)||(t.get&&c.on.get(t,r),t.put&&c.on.put(t,r)),this.to.next(t),e.out||(t.out=l,i.on("out",t)))}function p(t,n,o,e){var i=this,r=c.state.is(o,n);if(!r)return i.err="Error: No state on '"+n+"' in node '"+e+"'!";var a=i.graph[e]||N,u=c.state.is(a,n,!0),s=a[n],f=c.HAM(i.machine,r,u,t,s);f.incoming?(i.put[e]=c.state.to(o,n,i.put[e]),(i.diff||(i.diff={}))[e]=c.state.to(o,n,i.diff[e]),i.souls[e]=!0):f.defer&&(i.defer=r<(i.defer||1/0)?r:i.defer)}function h(t,n){var o=this,e=o.$._,i=(e.next||N)[n];if(!i){if(!(e.opt||N).super)return void(o.souls[n]=!1);i=o.$.get(n)._}var r=o.map[n]={put:t,get:n,$:i.$},a={ctx:o,msg:r};o.async=!!e.tag.node,o.ack&&(r["@"]=o.ack),w(t,d,a),o.async&&(o.and||e.on("node",function(t){this.to.next(t),t===o.map[t.get]&&(o.souls[t.get]=!1,w(t.put,g,t),w(o.souls,function(t){if(t)return t})||o.c||(o.c=1,this.off(),w(o.map,v,o)))}),o.and=!0,e.on("node",r))}function d(t,n){var o=this.ctx,e=o.graph,i=this.msg,r=i.get,a=i.put,u=i.$._;e[r]=c.state.to(a,n,e[r]),o.async||(u.put=c.state.to(a,n,u.put))}function g(t,n){var o=this.put,e=this.$._;e.put=c.state.to(o,n,e.put)}function v(t,n){t.$&&(this.cat.stop=this.stop,t.$._.on("in",t),this.cat.stop=null)}c.is=function(t){return t instanceof c||t&&t._&&t===t._.$||!1},c.version=.9,(c.chain=c.prototype).toJSON=function(){},n.obj.to(n,c),c.HAM=o,c.val=e,c.node=i,c.state=r,c.graph=a,c.on=u,c.ask=s,c.dup=f,c.create=function(t){t.root=t.root||t,t.graph=t.graph||{},t.on=t.on||c.on,t.ask=t.ask||c.ask,t.dup=t.dup||c.dup();var n=t.$.opt(t.opt);return t.once||(t.on("in",l,t),t.on("out",l,{at:t,out:l}),c.on("create",t),t.on("create",t)),t.once=1,n},c.on.put=function(t,n){var o=n._,e={$:n,graph:o.graph,put:{},map:{},souls:{},machine:c.state(),ack:t["@"],cat:o,stop:{}};if(c.graph.is(t.put,null,p,e)||(e.err="Error: Invalid graph!"),e.err)return o.on("in",{"@":t["#"],err:c.log(e.err)});w(e.put,h,e),e.async||w(e.map,v,e),void 0!==e.defer&&setTimeout(function(){c.on.put(t,n)},e.defer-e.machine),e.diff&&o.on("put",j(t,{put:e.diff}))},c.on.get=function(t,n){var o=n._,e=t.get,i=e[O],r=o.graph[i],a=e[G],u=(o.next||(o.next={}))[i];if(!r)return o.on("get",t);if(a){if("string"!=typeof a||!$(r,a))return o.on("get",t);r=c.state.to(r,a)}else r=c.obj.copy(r);r=c.graph.node(r),(u||N).ack,o.on("in",{"@":t["#"],how:"mem",put:r,$:n}),o.on("get",t)},c.chain.opt=function(t){t=t||{};var n=this._,o=t.peers||t;return x(t)||(t={}),x(n.opt)||(n.opt=t),b(o)&&(o=[o]),m(o)&&(o=w(o,function(t,n,o){(n={}).id=n.url=t,o(t,n)}),x(n.opt.peers)||(n.opt.peers={}),n.opt.peers=j(o,n.opt.peers)),n.opt.peers=n.opt.peers||{},w(t,function t(n,o){!$(this,o)||k.is(n)||_.empty(n)?this[o]=n:n&&n.constructor!==Object&&!m(n)||w(n,t,this[o])},n.opt),c.on("opt",n),n.opt.uuid=n.opt.uuid||function(){return S()+y(12)},this};var m=c.list.is,k=c.text,b=k.is,y=k.random,_=c.obj,x=_.is,$=_.has,j=_.to,w=_.map,S=(_.copy,c.state.lex),O=c.val.link._,G=".",N=(c.node._,c.val.link.is,{});T.debug=function(t,n){return T.debug.i&&t===T.debug.i&&T.debug.i++&&(T.log.apply(T,arguments)||n)},(c.log=function(){return c.log.off||T.log.apply(T,arguments),[].slice.call(arguments).join(" ")}).once=function(t,n,o){return(o=c.log.once)[t]=o[t]||0,o[t]++||c.log(n)},c.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, feel free to ask for help on https://gitter.im/amark/gun and ask StackOverflow questions tagged with 'gun'!"),"undefined"!=typeof window&&((window.GUN=window.Gun=c).window=window);try{void 0!==J&&(J.exports=c)}catch(t){}t.exports=c})(A,"./root"),A(function(t){var u=A("./root");u.chain.back=function(t,n){if(-1===(t=t||1)||1/0===t)return this._.root.$;if(1===t)return(this._.back||this._).$;var o=this._;if("string"==typeof t&&(t=t.split(".")),t instanceof Array){for(var e=0,i=t.length,r=o;e<i;e++)r=(r||s)[t[e]];return void 0!==r?n?this:r:(r=o.back)?r.$.back(t,n):void 0}if(t instanceof Function){var a;for(r={back:o};(r=r.back)&&void 0===(a=t(r,n)););return a}return u.num.is(t)?(o.back||o).$.back(t-1):this};var s={}})(A,"./back"),A(function(t){var s=A("./root");function r(t){var o,n,e=this.as,i=e.back,r=e.root;if(t.$||(t.$=e.$),this.to.next(t),o=t.get){if(e.lex&&(t.get=k(e.lex,t.get)),o["#"]||e.soul){if(o["#"]=o["#"]||e.soul,t["#"]||(t["#"]=y(9)),i=r.$.get(o["#"])._,o=o["."]){if(v(i.put,o)){if((n=(a=i.$.get(o)._).ack)||(a.ack=-1),i.on("in",{$:i.$,put:s.state.to(i.put,o),get:i.get}),n)return}else if("string"!=typeof o){var a={},u=(i.put||{})._;s.obj.map(i.put,function(t,n){s.text.match(n,o)&&(a[n]=t)}),s.obj.empty(a)||(a._=u,i.on("in",{$:i.$,put:a,get:i.get}))}}else{if((n=i.ack)||(i.ack=-1),v(i,"put")&&i.on("in",i),n)return;t.$=i.$}return r.ask(h,t),r.on("in",t)}if(r.now&&(r.now[e.id]=r.now[e.id]||!0,e.pass={}),o["."])return e.get?(t={get:{".":e.get},$:e.$},i.ask||(i.ask={}),i.ask[e.get]=t.$._):t={get:{},$:e.$},i.on("out",t);if(e.ack=e.ack||-1,e.get)return t.$=e.$,o["."]=e.get,(i.ask||(i.ask={}))[e.get]=t.$._,i.on("out",t)}return i.on("out",t)}function a(t){var n,o,e=this,i=e.as,r=i.root,a=(t.$||g)._||g,u=t.put;if(i.get&&t.get!==i.get&&(t=k(t,{get:i.get})),i.has&&a!==i&&(t=k(t,{$:i.$}),a.ack&&(i.ack=a.ack)),d===u){if(o=a.put,e.to.next(t),i.soul)return;if(d===o&&d!==a.put)return;return c(i,t,e),i.has&&p(i,t),m(a.echo,i.id),void m(i.map,a.id)}if(i.soul)return e.to.next(t),c(i,t,e),void(i.next&&b(u,l,{msg:t,cat:i}));if(!(n=s.val.link.is(u)))return s.val.is(u)?(i.has||i.soul?p(i,t):(a.has||a.soul)&&((a.echo||(a.echo={}))[i.id]=a.echo[a.id]||i,(i.map||(i.map={}))[a.id]=i.map[a.id]||{at:a}),e.to.next(t),void c(i,t,e)):(i.has&&a!==i&&v(a,"put")&&(i.put=a.put),(n=s.node.soul(u))&&a.has&&(a.put=i.root.$.get(n)._.put),o=(r.stop||{})[a.id],e.to.next(t),f(i,t,a,n),c(i,t,e),void(i.next&&b(u,l,{msg:t,cat:i})));r.stop;(o=(o=r.stop||{})[a.id]||(o[a.id]={})).is=o.is||a.put,o[i.id]=a.put||!0,e.to.next(t),f(i,t,a,n),c(i,t,e)}function f(t,n,o,e){if(e&&u!==t.get){var i=t.root.$.get(e)._;t.has?o=i:o.has&&f(o,n,o,e),o!==t&&(o.$||(o={}),(o.echo||(o.echo={}))[t.id]=o.echo[t.id]||t,t.has&&!(t.map||g)[o.id]&&p(t,n),(e!==(i=o.id?(t.map||(t.map={}))[o.id]=t.map[o.id]||{at:o}:{}).link||i.pass||t.pass)&&(t.pass&&(s.obj.map(t.map,function(t){t.pass=!0}),m(t,"pass")),i.pass&&m(i,"pass"),t.has&&(t.link=e),function(t,e){var n=t.root.$.get(e)._,o=t.lex;if((t.ack||o)&&((o=o||{})["#"]=e,n.on("out",{get:o}),!t.ask))return;n=t.ask,s.obj.del(t,"ask"),b(n||t.next,function(t,n){var o=t.lex||{};o["#"]=e,o["."]=o["."]||n,t.on("out",{get:o})}),s.obj.del(t,"ask")}(t,i.link=e)))}}function c(t,n){t.echo&&b(t.echo,o,n)}function o(t){t&&t.on&&t.on("in",this)}function l(t,n){var o,e,i,r=this.cat.next||g,a=this.msg;(u!==n||r[n])&&(e=r[n])&&(e.has?(d!==e.put&&s.val.link.is(t)||(e.put=t),o=e.$):(i=a.$)&&(i=(o=a.$.get(n))._,d!==i.put&&s.val.link.is(t)||(i.put=t)),e.on("in",{put:t,get:n,$:o,via:a}))}function p(o,t){if(o.has||o.soul){var e=o.map;o.root;o.map=null,o.has&&(o.dub&&o.root.stop&&(o.dub=null),o.link=null),(o.pass||t["@"]||null!==e)&&(d===e&&s.val.link.is(o.put)||(b(e,function(t){(t=t.at)&&m(t.echo,o.id)}),e=o.put,b(o.next,function(t,n){if(d===e&&d!==o.put)return!0;t.put=d,t.ack&&(t.ack=-1),t.on("in",{get:n,$:t.$,put:d})})))}}function h(t,n){var o=this.as,e=o.get||g,i=o.$._,r=(t.put||g)[e["#"]];if(i.ack&&(i.ack=i.ack+1||1),t.put&&("string"!=typeof e["."]||v(r,i.get)))u!=e["."]?s.on.put(t,i.root.$):i.on("in",{get:i.get,put:s.val.link.ify(e["#"]),$:i.$,"@":t["@"]});else{if(i.put!==d)return;i.on("in",{get:i.get,put:i.put=d,$:i.$,"@":t["@"]})}}s.chain.chain=function(t){var n,o=this._,e=new(t||this).constructor(this),i=e._;return i.root=n=o.root,i.id=++n.once,i.back=this._,i.on=s.on,i.on("in",a,i),i.on("out",r,i),e};var d,g={},n=s.obj,v=n.has,m=(n.put,n.del),k=n.to,b=n.map,y=s.text.random,u=(s.val.link._,s.node._)})(A,"./chain"),A(function(t){var f=A("./root");function c(t){var n,o=this,e=o.as,i=e.at.root,r=(t.$||{})._||{},a=t.put||r.put;if((n=i.now)&&o!==n[e.now])return o.to.next(t);if(o.seen&&r.id&&o.seen[r.id])return o.to.next(t);if((n=a)&&n[g._]&&(n=g.is(n))&&(n=(t.$$=r.root.gun.get(n))._,p!==n.put&&(t=s(t,{put:a=n.put}))),(n=i.mum)&&r.id){var u=r.id+(o.id||(o.id=f.text.random(9)));if(n[u])return;p===a||g.is(a)||(n[u]=!0)}e.use(t,o),o.stun?o.stun=null:o.to.next(t)}function l(t){var n=this.on;if(!t||n.soul||n.has)return this.off();if(t=(t=(t=t.$||t)._||t).id){var o;n.map;if((o=this.seen||(this.seen={}))[t])return!0;o[t]=!0}}f.chain.get=function(t,n,o){var e;if("string"!=typeof t){if(t instanceof Function){if(!0===n)return function(t,e,n,i){var r,a=t._,u=0;if(r=a.soul||a.link||a.dub)return e(r,i,a),t;return t.get(function(t,n){if(!(p===t.put&&(r=Object.keys(a.root.opt.peers).length)&&++u<r)){n.rid(t);var o=(o=t.$)&&o._||{};r=o.link||o.soul||g.is(t.put)||v(t.put)||o.dub,e(r,i,t,n)}},{out:{get:{".":!0}}}),t}(this,t,0,o);var i,r=(e=this)._,a=r.root,u=a.now;(o=n||{}).at=r,o.use=t,o.out=o.out||{},o.out.get=o.out.get||{},(i=r.on("in",c,o)).rid=l,(a.now={$:1})[o.now=r.id]=i;var s=a.mum;return a.mum={},r.on("out",o.out),a.mum=s,a.now=u,e}return d(t)?this.get(""+t,n,o):(u=g.is(t))?this.get(u,n,o):h.is(t)?(e=this,(u=((u=t["#"])||m)["="]||u)&&(e=e.get(u)),e._.lex=t,e):((o=this.chain())._.err={err:f.log("Invalid get request!",t)},n&&n.call(o,o._.err),o)}return(e=(this._.next||m)[t])||(e=function(t,n){var o=n._,e=o.next,i=n.chain()._;e=e||(o.next={});e[i.get=t]=i,n===o.root.$?i.soul=t:(o.soul||o.has)&&(i.has=t);return i}(t,this)),e=e.$,(u=this._.stun)&&(e._.stun=e._.stun||u),n&&n instanceof Function&&e.get(n,o),e};var p,h=f.obj,s=(h.map,h.has,f.obj.to),d=f.num.is,g=f.val.link,v=f.node.soul,m=(f.node._,{})})(A,"./get"),A(function(t){var f=A("./root");function s(t){t&&t()}function c(){var r=this;r.graph&&!o(r.stun,n)&&(r.res=r.res||function(t){t&&t()},r.res(function(){var n=r.$.back(-1)._,t=n.ask(function(t){n.root.on("ack",t),t.err&&f.log(t),++o>(r.acks||0)&&this.off(),r.ack&&r.ack(t,this)},r.opt),o=0,e=n.root.now;u.del(n.root,"now");var i=n.root.mum;n.root.mum={},r.ref._.on("out",{$:r.ref,put:r.out=r.env.graph,opt:r.opt,"#":t}),n.root.mum=i?u.to(i,n.root.mum):i,n.root.now=e},r),r.res&&r.res())}function n(t,n){if(t)return!0}function l(r,t,n,a){var u=this,s=f.is(r);!t&&a.path.length&&(u.res||e)(function(){for(var t=a.path,n=u.ref,o=(u.opt,0),e=t.length;o<e;o++)n=n.get(t[o]);s&&(n=r);var i=n._.dub;if(i=i||f.node.soul(a.obj))return n.back(-1).get(i),void a.soul(i);(u.stun=u.stun||{})[t]=!0,n.get(p,!0,{as:{at:a,as:u,p:t}})},{as:u,at:a})}function p(t,o,n,e){var i=(o=o.as).at;o=o.as;var r=((n||{}).$||{})._||{};t=r.dub=r.dub||t||f.node.soul(i.obj)||f.node.soul(n.put||r.put)||f.val.link.is(n.put||r.put)||(o.via.back("opt.uuid")||f.text.random)(),e&&(e.stun=!0),t?a(r,r.dub=t,i,o):o.via.back("opt.uuid")(function(t,n){if(t)return f.log(t);a(r,r.dub=r.dub||n,i,o)})}function a(t,n,o,e){t.$.back(-1).get(n),o.soul(n),e.stun[o.path]=!1,e.batch()}function h(t,o,n,e){if(o=o.as,n.$&&n.$._)if(n.err)T.log("Please report this as an issue! Put.any.err");else{var i,r=n.$._,a=r.put,u=o.opt||{};if(!(i=o.ref)||!i._.now){if(e&&(e.stun=!0),o.ref!==o.$){if(!(i=o.$._.get||r.get))return void T.log("Please report this as an issue! Put.no.get");o.data=g({},i,o.data),i=null}if(void 0===a){if(!r.get)return;t||(i=r.$.back(function(t){if(t.link||t.soul)return t.link||t.soul;o.data=g({},t.get,o.data)})),r=(i=i||r.soul||r.link||r.dub)?r.root.$.get(i)._:r,o.soul=i,a=o.data}o.not||(o.soul=o.soul||t)||(o.path&&d(o.data)?o.soul=(u.uuid||o.via.back("opt.uuid")||f.text.random)():(k==r.get&&(o.soul=(r.put||v)["#"]||r.dub),o.soul=o.soul||r.soul||r.link||(u.uuid||o.via.back("opt.uuid")||f.text.random)()),o.soul)?o.ref.put(o.data,o.soul,o):o.via.back("opt.uuid")(function(t,n){if(t)return f.log(t);o.ref.put(o.data,o.soul=n,o)})}}}f.chain.put=function(t,e,i){var n,r=this,o=r._,a=o.root.$,u=a._;if(!u.puta)if(n=u.puts){if(100<n){if((u.stack||(u.stack=[])).push([r,t,e,i]),u.puto)return;return u.puto=setTimeout(function t(){var n,o=u.stack.splice(0,100),e=0;for(u.puta=!0;n=o[e++];)n[0].put(n[1],n[2],n[3]);if(delete u.puta,u.stack.length)return u.puto=setTimeout(t,0);u.stack=u.puts=u.puto=null},0),r}++u.puts}else u.puts=1;return(i=i||{}).data=t,i.via=i.$=i.via||i.$||r,"string"==typeof e?i.soul=e:i.ack=i.ack||e,o.soul&&(i.soul=o.soul),i.soul||a===r?d(i.data)?(i.soul=i.soul||(i.not=f.node.soul(i.data)||(i.via.back("opt.uuid")||f.text.random)()),i.soul?(i.$=a.get(i.soul),i.ref=i.$,function(t){t.batch=c;var n=t.opt||{},o=t.env=f.state.map(l,n.state);if(o.soul=t.soul,t.graph=f.graph.ify(t.data,o,t),o.err)return(t.ack||m).call(t,t.out={err:f.log(o.err)}),t.res&&t.res();t.batch()}(i)):i.via.back("opt.uuid")(function(t,n){if(t)return f.log(t);(i.ref||i.$).put(i.data,i.soul=n,i)}),r):((i.ack||m).call(i,i.out={err:f.log("Data saved to the root level of the graph must be a node (an object), not a",typeof i.data,'of "'+i.data+'"!')}),i.res&&i.res(),r):f.is(t)?(t.get(function(t,n,o){if(!t)return f.log("The reference you are saving is a",typeof o.put,'"'+o.put+'", not a node (object)!');r.put(f.val.link.ify(t),e,i)},!0),r):(o.has&&(n=f.val.link.is(t))&&(o.dub=n),i.ref=i.ref||a._===(n=o.back)?r:n.$,i.ref._.soul&&f.val.is(i.data)&&o.get?(i.data=g({},o.get,i.data),i.ref.put(i.data,i.soul,i)):(i.ref.get(h,!0,{as:i}),i.out||(i.res=i.res||s,i.$._.stun=i.ref._.stun)),r)};var u=f.obj,d=u.is,g=u.put,o=u.map,v={},m=function(){},e=function(t,n){t.call(n||v)},k=f.node._})(A,"./put"),A(function(t){var n=A("./root");A("./chain"),A("./back"),A("./put"),A("./get"),t.exports=n})(A,"./index"),A(function(t){var f=A("./index");function u(t,n){var o,e=this,i=t.$,r=((i||{})._||{}).put||t.put;e.at;if(l!==r){if(o=t.$$){if(o=t.$$._,l===o.put)return;r=o.put}e.change&&(r=t.put),e.as?e.ok.call(e.as,t,n):e.ok.call(i,r,t.get,t,n)}}function c(t,n,o){if(t.$){var e,i,r=this.as,a=(r.at,t.$),u=a._,s=u.put||t.put;(i=t.$$)&&(e=i=t.$$._,l!==e.put&&(s=e.put)),(i=n.wait)&&(i=i[u.id])&&clearTimeout(i),n.ack=(n.ack||0)+1,!o&&l===s&&n.ack<=(r.acks||Object.keys(u.root.opt.peers).length)||(!o&&(l===s||u.soul||u.link||e&&!(0<e.ack))||l===s&&(i=Object.keys(u.root.opt.peers).length)&&!o&&(e||u).ack<i?i=(n.wait={})[u.id]=setTimeout(function(){c.call({as:r},t,n,i||1)},r.wait||99):(e&&l===e.put&&(i=p.is(s))&&(s=f.node.ify({},i)),n.rid(t),r.ok.call(a||r.$,s,t.get)))}else n.off()}f.chain.on=function(t,n,o,e){var i,r=this._;if("string"==typeof t)return n?(i=r.on(t,n,o||r,e),o&&o.$&&(o.subs||(o.subs=[])).push(i),this):r.on(t);var a=n;return(a=!0===a?{change:!0}:a||{}).at=r,a.ok=t,this.get(u,a),this},f.chain.val=function(t,n){return f.log.once("onceval","Future Breaking API Change: .val -> .once, apologies unexpected."),this.once(t,n)},f.chain.once=function(t,n){var o=this,e=o._,i=e.put;if(0<e.ack&&l!==i)return(t||a).call(o,i,e.get),o;if(t)return(n=n||{}).ok=t,n.at=e,n.out={"#":f.text.random(9)},o.get(c,{as:n}),n.async=!0,o;f.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it.");var r=o.chain();return r._.nix=o.once(function(){r._.on("in",o._)}),r},f.chain.off=function(){var t,n=this._,o=n.back;if(o)return n.ack=0,(t=o.next)&&t[n.get]&&i(t,n.get),(t=o.ask)&&i(t,n.get),(t=o.put)&&i(t,n.get),(t=n.soul)&&i(o.root.graph,t),(t=n.map)&&e(t,function(t){t.link&&o.root.$.get(t.link).off()}),(t=n.next)&&e(t,function(t){t.$.off()}),n.on("off",{}),this};var l,n=f.obj,e=n.map,i=(n.has,n.del),p=(n.to,f.val.link),a=function(){}})(A,"./on"),A(function(t){var u=A("./index");function i(t){if(!t.put||u.val.is(t.put))return this.to.next(t);this.as.nix&&this.off(),o(t.put,n,{at:this.as,msg:t}),this.to.next(t)}function n(t,n){if(a!==n){var o=this.msg.$,e=o._,i=this.at,r=e.lex;r&&!u.text.match(n,r["."]||r["#"]||r)||(((r=o.get(n)._).echo||(r.echo={}))[i.id]=r.echo[i.id]||i)}}u.chain.map=function(r,t,n){var a,o=this,e=o._;return r?(u.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),a=o.chain(),o.map().on(function(t,n,o,e){var i=(r||s).call(this,t,n,o,e);if(void 0!==i)return t===i?a._.on("in",o):u.is(i)?a._.on("in",i._):void a._.on("in",{get:n,put:i})})):(a=e.each)||(e.each=a=o.chain(),a._.nix=o.back("nix"),o.on("in",i,a._)),a};var o=u.obj.map,s=function(){},a=u.node._})(A,"./map"),A(function(t){var a=A("./index");a.chain.set=function(t,e,i){var n,r=this;return e=e||function(){},(i=i||{}).item=i.item||t,(n=a.node.soul(t))&&(t=a.obj.put({},n,a.val.link.ify(n))),a.is(t)?(t.get(function(t,n,o){if(!t)return e.call(r,{err:a.log('Only a node can be linked! Not "'+o.put+'"!')});r.put(a.obj.put({},t,a.val.link.ify(t)),e,i)},!0),t):(a.obj.is(t)&&(t=r.back(-1).get(n=n||a.node.soul(t)||r.back("opt.uuid")()).put(t)),r.get(n||a.state.lex()+a.text.random(7)).put(t,e,i))}})(A,"./set"),A(function(t){if("undefined"!=typeof Gun){var p;try{p=(Gun.window||function(){}).localStorage}catch(t){}p||(T.log("Warning: No localStorage exists to persist data to!"),p={setItem:function(t,n){this[t]=n},removeItem:function(t){delete this[t]},getItem:function(t){return this[t]}}),Gun.on("create",function(t){var n=this.to,o=t.opt;if(t.once)return n.next(t);o.prefix=o.file||"gun/";var i,e,r=Gun.obj.ify(p.getItem("gap/"+o.prefix))||{},a=Gun.obj.empty;if(!a(r)){var u=Gun.obj.ify(p.getItem(o.prefix))||{},s={};Gun.obj.map(r,function(t,o){Gun.obj.map(t,function(t,n){s[o]=Gun.state.to(u[o],n,s[o])})}),setTimeout(function(){t.on("out",{put:s,"#":t.ask(f)})},1)}function f(t){if(!t.err&&t.ok){var e=t["@"];setTimeout(function(){Gun.obj.map(r,function(o,t){Gun.obj.map(o,function(t,n){e===t&&delete o[n]}),a(o)&&delete r[t]}),l()},o.wait||1)}}t.on("out",function(t){t.lS||(Gun.is(t.$)&&t.put&&!t["@"]&&(i=t["#"],Gun.graph.is(t.put,null,c),e=e||setTimeout(l,o.wait||1)),this.to.next(t))}),t.on("ack",f),n.next(t);var c=function(t,n,o,e){(r[e]||(r[e]={}))[n]=i},l=function(){clearTimeout(e),e=!1;try{p.setItem("gap/"+o.prefix,JSON.stringify(r))}catch(t){Gun.log(err=t||"localStorage failure")}}}),Gun.on("create",function(a){this.to.next(a);var e=a.opt;if(!a.once&&!1!==e.localStorage){e.prefix=e.file||"gun/";a.graph;var i,r={},u=0,s=Gun.obj.ify(p.getItem(e.prefix))||{};a.on("localStorage",s),a.on("put",function(t){if(this.to.next(t),Gun.graph.is(t.put,null,n),t["@"]||(r[t["#"]]=!0),(u+=1)>=(e.batch||1e3))return f();i=i||setTimeout(f,e.wait||1)}),a.on("get",function(n){this.to.next(n);var o,e,i,r=n.get;function t(){if(r&&(o=r["#"])){var t=r["."];(e=s[o]||i)&&t&&(e=Gun.state.to(e,t)),a.on("in",{"@":n["#"],put:Gun.graph.node(e),how:"lS",lS:n.$})}}Gun.debug?setTimeout(t,1):t()});var n=function(t,n,o,e){s[e]=Gun.state.to(o,n,s[e])},f=function(t){var o;u=0,clearTimeout(i),i=!1;var n=r;r={},t&&(s=t);try{p.setItem(e.prefix,JSON.stringify(s))}catch(t){Gun.log(o=(t||"localStorage failure")+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),a.on("localStorage:error",{err:o,file:e.prefix,flush:s,retry:f})}(o||Gun.obj.empty(e.peers))&&Gun.obj.map(n,function(t,n){a.on("in",{"@":n,err:o,ok:0})})}}})}})(A,"./adapters/localStorage"),A(function(t){var v=A("../type");!function(){v.text.hash=function(t){if("string"!=typeof t)return{err:1};var n=0;if(!t.length)return n;for(var o=0,e=t.length;o<e;++o)n=(n<<5)-n+t.charCodeAt(o),n|=0;return n};var o=JSON.stringify;function e(t,n){var o;return n instanceof Object?(v.obj.map(Object.keys(n).sort(),i,{to:o={},on:n}),o):n}function i(t){this.to[t]=this.on[t]}v.obj.hash=function(t,n){if(n||void 0!==(t=o(t,e)))return v.text.hash(n||t||"")},v.obj.hash.sort=e}();try{t.exports=function(s){var f=function(){},c=s.opt||{};c.log=c.log||T.log,c.gap=c.gap||c.wait||1,c.pack=c.pack||.3*(c.memory?1e3*c.memory*1e3:1399e6);var l=s.dup;f.hear=function(t,n){if(t){var o,e,i,r=t[0];if(c.pack<=t.length)return f.say({dam:"!",err:"Message too big!"},n);if("{"!=t[2]&&(f.hear.d+=t.length||0,++f.hear.c),"["!==r){if("{"===r||v.obj.is(t)&&(o=t)){try{o=o||JSON.parse(t)}catch(t){return c.log("DAM JSON parse error",t)}if(!o)return;if((e=o["#"])||(e=o["#"]=v.text.random(9)),l.check(e))return;if((i=(l.track(e,!0).it=o)["##"])||void 0===o.put||(i=o["##"]=v.obj.hash(o.put)),i&&(r=o["@"]||o.get&&e)){if(l.check(r+i))return;l.track(r+i,!0).it=o}return(o._=function(){}).via=n,(r=o["><"])&&(o._.to=v.obj.map(r.split(","),p)),o.dam?void((r=f.hear[o.dam])&&r(o,n,s)):void s.on("in",o)}}else{try{o=JSON.parse(t)}catch(t){c.log("DAM JSON parse error",t)}if(!o)return;for(var a,u=0;a=o[u++];)f.hear(a,n)}}};var u,p=function(t,n,o){o(t,!0)};function h(t){f.say(u,t)}function d(t){var n=t.batch;if(t.batch=t.tail=null,n&&n.length){try{n=1===n.length?n[0]:JSON.stringify(n)}catch(t){return c.log("DAM JSON stringify error",t)}n&&g(n,t)}}function g(n,o){try{var t=o.wire;o.say?o.say(n):t.send&&t.send(n),f.say.d+=n.length||0,++f.say.c}catch(t){(o.queue=o.queue||[]).push(n)}}f.hear.c=f.hear.d=0,f.say=function(t,n){if(this.to&&this.to.next(t),!t)return!1;var o,e,i,r,a=t._||(t._=function(){});if((o=t["#"])||(o=t["#"]=v.text.random(9)),(e=t["##"])||void 0===t.put||(e=t["##"]=v.obj.hash(t.put)),!(r=a.raw)&&(r=a.raw=f.raw(t),e&&(i=t["@"])&&(l.track(i+e).it=t,i=(l.s[i]||!0).it))){if(e===i["##"])return!1;i["##"]=e}if(l.track(o).it=t,!(n=n||(i=l.s[t["@"]])&&(i=i.it)&&(i=i._)&&(i=i.via))&&f.way)return f.way(t);if(!n||!n.id)return u=t,!!v.obj.is(n||c.peers)&&void v.obj.map(n||c.peers,h);if(!n.wire&&f.wire&&f.wire(n),o!==n.last){if(n.last=o,n===a.via)return!1;if((i=a.to)&&(i[n.url]||i[n.pid]||i[n.id]))return!1;if(n.batch){if(n.tail=(i=n.tail||0)+r.length,n.tail<=c.pack)return void n.batch.push(r);d(n)}n.batch=[],setTimeout(function(){d(n)},c.gap),g(r,n)}},f.say.c=f.say.d=0,function(){f.raw=function(t){if(!t)return"";var n,o=t._||{};if(n=o.raw)return n;if("string"==typeof t)return t;if(!t.dam){var e=0,i=[];v.obj.map(c.peers,function(t){if(i.push(t.url||t.pid||t.id),9<++e)return!0}),1<e&&(t["><"]=i.join())}var r=a(t);return o&&(o.raw=r),r};var a=JSON.stringify}(),f.hi=function(n){var t=n.wire||{};n.id?c.peers[n.url||n.id]=n:(t=n.id=n.id||v.text.random(9),f.say({dam:"?"},c.peers[t]=n)),n.met=n.met||+new Date,t.hied||s.on(t.hied="hi",n),t=n.queue,n.queue=[],v.obj.map(t,function(t){g(t,n)})},f.bye=function(t){s.on("bye",t);var n=+new Date;n-=t.met||n,f.bye.time=((f.bye.time||n)+n)/2},f.hear["!"]=function(t,n){c.log("Error:",t.err)},f.hear["?"]=function(t,n){t.pid?n.pid||(n.pid=t.pid):f.say({dam:"?",pid:c.pid,"@":t["#"]},n)},s.on("create",function(t){t.opt.pid=t.opt.pid||v.text.random(9),this.to.next(t),t.on("out",f.say)}),s.on("bye",function(t,n){t=c.peers[t.id||t]||t,this.to.next(t),t.bye?t.bye():(n=t.wire)&&n.close&&n.close(),v.obj.del(c.peers,t.id),t.wire=null});var i={};return s.on("bye",function(t,n){this.to.next(t),(n=t.url)&&(i[n]=!0,setTimeout(function(){delete i[n]},c.lack||9e3))}),s.on("hi",function(o,e){this.to.next(o),(e=o.url)&&i[e]&&(delete i[e],v.obj.map(s.next,function(t,n){(e={})[n]=s.graph[n],f.say({"##":v.obj.hash(e),get:{"#":n}},o)}))}),f}}catch(t){}})(A,"./adapters/mesh"),A(function(t){var f=A("../index"),n=A("./mesh");f.Mesh=n,f.on("opt",function(t){this.to.next(t);var e=t.opt;if(!t.once&&!1!==e.WebSocket){var n;"undefined"!=typeof window&&(n=window),"undefined"!=typeof global&&(n=global),n=n||{};var o=e.WebSocket||n.WebSocket||n.webkitWebSocket||n.mozWebSocket;if(o){e.WebSocket=o;var i=e.mesh=e.mesh||f.Mesh(t);i.wire||e.wire;i.wire=e.wire=u;var r=2e3,a="undefined"!=typeof document&&document}}function u(n){try{if(!n||!n.url)return o&&o(n);var t=n.url.replace("http","ws"),o=n.wire=new e.WebSocket(t);return o.onclose=function(){e.mesh.bye(n),s(n)},o.onerror=function(t){s(n)},o.onopen=function(){e.mesh.hi(n)},o.onmessage=function(t){t&&e.mesh.hear(t.data||t,n)},o}catch(t){}}function s(n){clearTimeout(n.defer),a&&n.retry<=0||(n.retry=(n.retry||e.retry||60)-1,n.defer=setTimeout(function t(){if(a&&a.hidden)return setTimeout(t,r);u(n)},r))}})})(A,"./adapters/websocket")}();