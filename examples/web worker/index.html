<!DOCTYPE html>
<html>

<head>
  <title>Think</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
</head>

<body>
  <h1>Thoughts</h1>

  <form id="form">
    <input id="input">
    <button>Add</button>
  </form>

  <ul id="parentList"></ul>


  <script>

    const parentList = document.getElementById('parentList')
    const input = document.getElementById('input')
    const form = document.getElementById('form')

    worker1 = new Worker("worker1.js")
    const dynamicEvent = e => {
      const target = e.target

      worker1.postMessage(target.id);

      target.innerHTML = document.getElementById(target.innerHTML)

      if (target.innerHTML === ' null' || target.innerHTML === ' ' || target.innerHTML === '') {
        target.style.display = 'none'
      } else {
        target.style.display = 'list-item'
      }
    }
  worker1.onmessage = function (message) {
  parentList.insertAdjacentHTML('beforeend', `<li id =${message.data[0]}> ${message.data[1]}</li>`)

      const links = parentList.getElementsByTagName('li')

      for (const link of links) {
        if (link.innerHTML === ' null' || link.innerHTML === ' ' || link.innerHTML === '') {
          link.style.display = 'none'
        } else {
          link.style.display = 'list-item'
        }
        link.ondblclick = dynamicEvent
      }
  }

  worker2 = new Worker("worker2.js")

    form.addEventListener('submit', e => {
      e.preventDefault()
      worker2.postMessage(input.value)
      input.value = ''
    })
  </script>
</body>

</html>
